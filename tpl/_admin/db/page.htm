<link href="{ASSET_LOCATIONS.CSS}admin/db.css" rel="stylesheet" type="text/css">
<script src="{ASSET_LOCATIONS.JS}admin/diDbManager.js" type="text/javascript" charset="utf-8"></script>

<center>
	<table class="db-list">
		<tr>
			<td rowspan="3">
				<form class="create" method="get" action="">

					<h2>Select tables</h2>
					<div style="margin-bottom: 10px;">
						<div>{TABLES_SELECT}</div>
						<div>
							<u data-purpose="select-all">select</u>/<u data-purpose="deselect-all">deselect</u> all
						</div>
					</div>

					<div style="margin-bottom: 10px;">
						<input type="checkbox" id="system" name="system" checked> <label for="system">use system routine</label>
						<input type="checkbox" id="compress_dump" name="compress_dump" checked> <label for="compress_dump">GZIP compression</label>
					</div>

					<div class="dump-settings">
						<input type="checkbox" id="dump_drops" checked> <label for="dump_drops">drops</label>
						<input type="checkbox" id="dump_creates" checked> <label for="dump_creates">creates</label>
						<input type="checkbox" id="dump_fields" checked> <label for="dump_fields">fields</label>
						<input type="checkbox" id="dump_data" checked> <label for="dump_data">data</label>
						<input type="checkbox" id="dump_multiple" checked> <label for="dump_multiple">multi-insert</label>
					</div>

					<div style="margin-bottom: 10px;">Custom dump filename: <input type="text" id="dump_fn" style="width: 250px;"></div>

					<div align=center><button type="submit">Create DB dump</button></div>

				</form>
			</td>
			<td style="vertical-align: top;"><h3>Total size: {TOTAL_SIZE} (+index: {TOTAL_IDX_SIZE})</h3></td>
		</tr>
		<tr>
			<td style="vertical-align: top;"><div><b>Selected size: <span id="total_size_selected"></span> (+index: <span id="total_idx_size_selected"></span>)</b></div></td>
		</tr>
		<tr>
			<td valign=top>
				<iframe name="upload_container"></iframe>
				<form name="dump_upload" enctype="multipart/form-data" method="post" action="{WORKER_URI_UPLOAD}" target="upload_container">
					<div style="margin-bottom: 10px;">
						<font size=-2>you can upload <b>.sql</b> and <b>.gz</b> files only!</font><br>
						<input type="file" name="dump" value="" accept=".gz,.sql">
					</div>

					<div align=center>
						<button type="submit">Upload DB dump</button>
					</div>
				</form>
			</td>
		</tr>
	</table>

	<div class="db-errors-console"></div>

	<table class="db-dump-rows">
	{DUMP_FOLDER_ROWS}
	</table>

</center>

<div class="dipopup" data-name="view-sql" data-positioning="false"><div class="scroller"><code></code></div></div>

<script type="text/javascript">
	var manager;

	$(function() {

		manager = new diDbManager({
			workerUri: '{WORKER_URI}'
		});

	});
</script>
